{"type":"create","timestamp":"2026-02-07T23:16:10.972175Z","issue_id":"pr-sheriff-b85","payload":{"description":"Create a proper CLI (not scripts): commands, config, structured JSON output.","priority":"2","title":"CLI scaffold","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T23:16:12.592569Z","issue_id":"pr-sheriff-92d","payload":{"description":"Fetch PRs/issues/comments/timelines, caching + rate limiting.","priority":"2","title":"GitHub ingestion","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T23:16:14.121782Z","issue_id":"pr-sheriff-624","payload":{"description":"Build local qmd corpus for PRs/issues; semantic candidate retrieval.","priority":"2","title":"Semantic index (qmd)","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T23:16:15.69287Z","issue_id":"pr-sheriff-cf5","payload":{"description":"Rerank candidates using mergedAt/closedAt and reference graph signals.","priority":"2","title":"Timeline-aware ranking","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T23:16:17.163769Z","issue_id":"pr-sheriff-5ba","payload":{"description":"Final superseded/related classification with evidence + confidence.","priority":"2","title":"LLM classification","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T23:16:19.530817Z","issue_id":"pr-sheriff-468","payload":{"description":"Generate HTML/MD reports and publish to pagedrop.","priority":"2","title":"Reports \u0026 pagedrop","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T23:16:23.246254Z","issue_id":"pr-sheriff-e11","payload":{"description":"Decide implementation language/runtime and basic packaging strategy.","priority":"2","title":"Choose CLI stack (Node+commander vs Python+typer)","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:24.735888Z","issue_id":"pr-sheriff-b85","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-e11"}}
{"type":"create","timestamp":"2026-02-07T23:16:26.776265Z","issue_id":"pr-sheriff-656","payload":{"description":"Create src/, commands, config loading, JSON output plumbing.","priority":"2","title":"Scaffold CLI project structure","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:28.463104Z","issue_id":"pr-sheriff-b85","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-656"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:28.492941Z","issue_id":"pr-sheriff-656","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-e11"}}
{"type":"create","timestamp":"2026-02-07T23:16:30.448135Z","issue_id":"pr-sheriff-ba8","payload":{"description":"Wrapper around gh api: PR details, all comments, issue timeline, pagination, caching.","priority":"2","title":"Implement GitHub fetch layer","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:31.96567Z","issue_id":"pr-sheriff-92d","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-ba8"}}
{"type":"create","timestamp":"2026-02-07T23:16:33.782351Z","issue_id":"pr-sheriff-024","payload":{"description":"Extract referenced issues/PRs from body+comments; 2-layer traversal; keep caps/budgets.","priority":"2","title":"Implement reference graph builder","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:36.24728Z","issue_id":"pr-sheriff-92d","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-024"}}
{"type":"create","timestamp":"2026-02-07T23:16:38.286737Z","issue_id":"pr-sheriff-630","payload":{"description":"Define doc schema (PR/issue markdown or JSONL) and indexer to build/update qmd index.","priority":"2","title":"qmd corpus format + incremental indexer","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:39.955027Z","issue_id":"pr-sheriff-624","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-630"}}
{"type":"create","timestamp":"2026-02-07T23:16:41.981065Z","issue_id":"pr-sheriff-41a","payload":{"description":"Given target PR, query qmd to retrieve semantically similar merged PRs/issues; output top N.","priority":"2","title":"Candidate retrieval via qmd","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:43.719008Z","issue_id":"pr-sheriff-624","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-41a"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:43.752137Z","issue_id":"pr-sheriff-41a","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-630"}}
{"type":"create","timestamp":"2026-02-07T23:16:45.677555Z","issue_id":"pr-sheriff-228","payload":{"description":"Score candidates using mergedAt/closedAt vs target createdAt, reference links, labels, etc.","priority":"2","title":"Timeline-aware reranker","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:48.273933Z","issue_id":"pr-sheriff-cf5","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-228"}}
{"type":"create","timestamp":"2026-02-07T23:16:50.098389Z","issue_id":"pr-sheriff-72c","payload":{"description":"Prompting + strict JSON output with confidence, rationale, evidence snippets.","priority":"2","title":"LLM judge + JSON schema","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:51.517784Z","issue_id":"pr-sheriff-5ba","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-72c"}}
{"type":"create","timestamp":"2026-02-07T23:16:53.547596Z","issue_id":"pr-sheriff-6ec","payload":{"description":"Generate HTML report for batch runs; publish to pagedrop (g/ or s/).","priority":"2","title":"HTML report + pagedrop publisher","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T23:16:55.529738Z","issue_id":"pr-sheriff-468","payload":{"dep_type":"blocks","depends_on":"pr-sheriff-6ec"}}
{"type":"create","timestamp":"2026-02-07T23:16:58.259619Z","issue_id":"pr-sheriff-970","payload":{"description":"Bring pr-supersession-single.js behavior into  command.","priority":"2","title":"Port existing supersession logic into CLI command","type":"task"}}
{"type":"status_update","timestamp":"2026-02-07T23:17:47.08497Z","issue_id":"pr-sheriff-ba8","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-07T23:19:26.570798Z","issue_id":"pr-sheriff-656","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-07T23:19:29.63575Z","issue_id":"pr-sheriff-630","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-07T23:21:16.317497Z","issue_id":"pr-sheriff-e11","payload":{"status":"in_progress"}}
{"type":"comment","timestamp":"2026-02-07T23:21:16.347694Z","issue_id":"pr-sheriff-e11","payload":{"body":"Recommendation: Node.js (TypeScript) + commander.\n\nRationale\n- Existing repo prototypes are already Node scripts (e.g. scripts/*.js using \"gh api\" and Anthropic calls), so TS minimizes rewrite and keeps iteration fast.\n- GitHub API usage: TS has first-class options (Octokit) and we can still shell out to \"gh api\" early without changing behavior.\n- Anthropic API: TS has an official SDK option; fallback is straightforward \"fetch\".\n- qmd / Quarto integration: easiest as process execution (\"quarto render\" or similar) and file IO; Node handles this well.\n- Packaging: publishable npm CLI with \"bin\" entry; install via npm/pnpm or run via npx. (If we later want a single-file binary, we can add that as a separate task.)\n- Testability: typical TS CLI stack (vitest/jest) + strong typing for JSON schemas and CLI options.\n\nNot choosing Python+typer\n- Would introduce a second runtime/toolchain (venv/pipx) and require porting existing JS prototypes, with no clear upside for the current integrations."}}
{"type":"close","timestamp":"2026-02-07T23:23:42.991684Z","issue_id":"pr-sheriff-656","payload":{}}
{"type":"close","timestamp":"2026-02-07T23:23:53.224712Z","issue_id":"pr-sheriff-ba8","payload":{}}
{"type":"comment","timestamp":"2026-02-07T23:26:21.966941Z","issue_id":"pr-sheriff-630","payload":{"body":"Implemented corpus format + indexer.\n\n- Added docs for on-disk corpus format + timeline-aware metadata: docs/corpus/FORMAT.md\n- Added indexer usage docs: docs/corpus/INDEXER.md\n- Added standalone indexer script: scripts/qmd-corpus-index.js\n  - Fetches PRs/issues via gh api (incremental via --since, safety via --limit)\n  - Writes docs/corpus/\u003cowner\u003e/\u003crepo\u003e/{pull,issue}/\u003cnum\u003e.md with YAML frontmatter + Timeline section\n  - Indexes with qmd collection add (fallback qmd update)\n\nCommit: af779ed"}}
{"type":"status_update","timestamp":"2026-02-07T23:51:56.727023Z","issue_id":"pr-sheriff-e11","payload":{"status":"closed"}}
{"type":"status_update","timestamp":"2026-02-08T00:14:01.725707Z","issue_id":"pr-sheriff-630","payload":{"status":"closed"}}
{"type":"status_update","timestamp":"2026-02-08T00:15:03.226616Z","issue_id":"pr-sheriff-024","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-08T00:15:04.615416Z","issue_id":"pr-sheriff-72c","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-08T00:15:08.247054Z","issue_id":"pr-sheriff-970","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-08T00:18:36.657173Z","issue_id":"pr-sheriff-41a","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-08T00:18:39.577494Z","issue_id":"pr-sheriff-41a","payload":{"status":"in_progress"}}
{"type":"comment","timestamp":"2026-02-08T02:08:53.479154Z","issue_id":"pr-sheriff-72c","payload":{"body":"Implemented strict judge JSON schema + validator, robust JSON-only parsing (fence stripping), Anthropic judge client + prompt helpers, and node:test unit tests. Next: commit + close."}}
{"type":"comment","timestamp":"2026-02-08T02:09:25.120762Z","issue_id":"pr-sheriff-024","payload":{"body":"Implemented src/graph reference graph builder + extraction; wired into analyze-pr; added unit tests; build now copies .mjs runtime modules to dist and adds npm test."}}
{"type":"close","timestamp":"2026-02-08T02:09:38.638865Z","issue_id":"pr-sheriff-024","payload":{}}
{"type":"comment","timestamp":"2026-02-08T02:09:38.670034Z","issue_id":"pr-sheriff-024","payload":{"body":"COMPLETE: Commit 9a01d8c implements src/graph reference graph builder + extraction; analyze-pr now returns graph; added node:test suites for extraction and traversal; build copies .mjs modules to dist and adds npm test."}}
{"type":"comment","timestamp":"2026-02-08T02:10:02.31785Z","issue_id":"pr-sheriff-41a","payload":{"body":"Implemented qmd-based candidate retrieval: added 'pr-sheriff candidates' subcommand, qmd runner + JSON parsing, corpus frontmatter parsing via 'qmd get', graceful missing-collection error, and stubbed tests. Commit: 74f9b37."}}
{"type":"close","timestamp":"2026-02-08T02:10:02.3493Z","issue_id":"pr-sheriff-41a","payload":{}}
{"type":"close","timestamp":"2026-02-08T02:10:28.614072Z","issue_id":"pr-sheriff-72c","payload":{}}
{"type":"comment","timestamp":"2026-02-08T02:10:28.645836Z","issue_id":"pr-sheriff-72c","payload":{"body":"COMPLETE: Added strict judge JSON schema (superseded_by/related/evidence/confidence/timelines), runtime validator, JSON-only output parser (fence stripping), Anthropic Messages API judge module + prompt helpers, and node:test unit tests. Commit: 678ad4f"}}
{"type":"close","timestamp":"2026-02-08T02:12:34.758248Z","issue_id":"pr-sheriff-970","payload":{}}
{"type":"comment","timestamp":"2026-02-08T02:13:44.793592Z","issue_id":"pr-sheriff-970","payload":{"body":"Implemented analyze-pr vertical slice wired to GitHubFetch with --dry-fixtures stub runner + node --test smoke test. Added build step to copy src/github/*.mjs into dist and NodeNext typings for index.mjs. Commit: ffb8f70"}}
