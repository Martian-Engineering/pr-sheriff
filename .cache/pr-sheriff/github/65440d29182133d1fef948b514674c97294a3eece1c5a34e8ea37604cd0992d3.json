{
  "url": "https://api.github.com/repos/openclaw/openclaw/issues/10602",
  "repository_url": "https://api.github.com/repos/openclaw/openclaw",
  "labels_url": "https://api.github.com/repos/openclaw/openclaw/issues/10602/labels{/name}",
  "comments_url": "https://api.github.com/repos/openclaw/openclaw/issues/10602/comments",
  "events_url": "https://api.github.com/repos/openclaw/openclaw/issues/10602/events",
  "html_url": "https://github.com/openclaw/openclaw/issues/10602",
  "id": 3907931157,
  "node_id": "I_kwDOQb6kR87o7kwV",
  "number": 10602,
  "title": "Cron jobs ignore model specification in payload",
  "user": {
    "login": "vera-clawbot",
    "id": 258675838,
    "node_id": "U_kgDOD2sUfg",
    "avatar_url": "https://avatars.githubusercontent.com/u/258675838?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vera-clawbot",
    "html_url": "https://github.com/vera-clawbot",
    "followers_url": "https://api.github.com/users/vera-clawbot/followers",
    "following_url": "https://api.github.com/users/vera-clawbot/following{/other_user}",
    "gists_url": "https://api.github.com/users/vera-clawbot/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vera-clawbot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vera-clawbot/subscriptions",
    "organizations_url": "https://api.github.com/users/vera-clawbot/orgs",
    "repos_url": "https://api.github.com/users/vera-clawbot/repos",
    "events_url": "https://api.github.com/users/vera-clawbot/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vera-clawbot/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2026-02-06T18:24:13Z",
  "updated_at": "2026-02-07T02:05:38Z",
  "closed_at": "2026-02-07T02:05:38Z",
  "author_association": "NONE",
  "type": null,
  "active_lock_reason": null,
  "sub_issues_summary": {
    "total": 0,
    "completed": 0,
    "percent_completed": 0
  },
  "issue_dependencies_summary": {
    "blocked_by": 0,
    "total_blocked_by": 0,
    "blocking": 0,
    "total_blocking": 0
  },
  "body": "## Summary\nCron jobs with a specific `model` in the payload are ignoring that specification and falling back to what appears to be an internal default fallback chain that differs from both the specified model AND the configured agent defaults.\n\n## Observed Behavior\nJob `hourly-stage1-r1-analysis` specifies:\n```json\n\"model\": \"openrouter/deepseek/deepseek-r1\"\n```\n\nBut when run, the error shows it tried:\n```\nanthropic/claude-sonnet-4-20250514\nanthropic/claude-opus-4-6\n```\n\nNeither of these is the specified model OR the configured default fallback (`anthropic/claude-opus-4-5` â†’ `openrouter/deepseek/deepseek-r1`).\n\n## Direct API Tests\nBoth models work fine when tested directly:\n- LM Studio (Qwen): instant response via localhost:1234\n- OpenRouter (DeepSeek R1): working via https://openrouter.ai/api/v1\n\n## Config (relevant parts)\n```json\n\"models\": {\n  \"providers\": {\n    \"openrouter\": {\n      \"baseUrl\": \"https://openrouter.ai/api/v1\",\n      \"apiKey\": \"...\",\n      \"models\": [{\"id\": \"deepseek/deepseek-r1\", ...}]\n    }\n  }\n},\n\"agents\": {\n  \"defaults\": {\n    \"model\": {\n      \"primary\": \"anthropic/claude-opus-4-5\",\n      \"fallbacks\": [\"openrouter/deepseek/deepseek-r1\"]\n    }\n  }\n}\n```\n\n## Expected Behavior\nCron jobs should use the model specified in `payload.model`, with the configured fallback chain if that model fails.\n\n## Environment\n- OpenClaw: 2026.2.3-1\n- OS: macOS 26.2 (M4)\n\n## Related\nPossibly related to #5533 (meta.lastTouchedAt)",
  "closed_by": {
    "login": "tyler6204",
    "id": 64381258,
    "node_id": "MDQ6VXNlcjY0MzgxMjU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/64381258?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tyler6204",
    "html_url": "https://github.com/tyler6204",
    "followers_url": "https://api.github.com/users/tyler6204/followers",
    "following_url": "https://api.github.com/users/tyler6204/following{/other_user}",
    "gists_url": "https://api.github.com/users/tyler6204/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tyler6204/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tyler6204/subscriptions",
    "organizations_url": "https://api.github.com/users/tyler6204/orgs",
    "repos_url": "https://api.github.com/users/tyler6204/repos",
    "events_url": "https://api.github.com/users/tyler6204/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tyler6204/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/openclaw/openclaw/issues/10602/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/openclaw/openclaw/issues/10602/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed",
  "pinned_comment": null
}
