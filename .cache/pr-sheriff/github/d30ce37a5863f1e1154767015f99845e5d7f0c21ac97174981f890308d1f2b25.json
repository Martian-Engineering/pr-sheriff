{
  "url": "https://api.github.com/repos/openclaw/openclaw/issues/10538",
  "repository_url": "https://api.github.com/repos/openclaw/openclaw",
  "labels_url": "https://api.github.com/repos/openclaw/openclaw/issues/10538/labels{/name}",
  "comments_url": "https://api.github.com/repos/openclaw/openclaw/issues/10538/comments",
  "events_url": "https://api.github.com/repos/openclaw/openclaw/issues/10538/events",
  "html_url": "https://github.com/openclaw/openclaw/issues/10538",
  "id": 3907555851,
  "node_id": "I_kwDOQb6kR87o6JIL",
  "number": 10538,
  "title": "[Bug]:  Cron main-session jobs frequently “skipped: timeout waiting for main lane to become idle” → prevents reliable automation (wakeMode=now)",
  "user": {
    "login": "mrsrisg",
    "id": 221397347,
    "node_id": "U_kgDODTJBYw",
    "avatar_url": "https://avatars.githubusercontent.com/u/221397347?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mrsrisg",
    "html_url": "https://github.com/mrsrisg",
    "followers_url": "https://api.github.com/users/mrsrisg/followers",
    "following_url": "https://api.github.com/users/mrsrisg/following{/other_user}",
    "gists_url": "https://api.github.com/users/mrsrisg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mrsrisg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mrsrisg/subscriptions",
    "organizations_url": "https://api.github.com/users/mrsrisg/orgs",
    "repos_url": "https://api.github.com/users/mrsrisg/repos",
    "events_url": "https://api.github.com/users/mrsrisg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mrsrisg/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 9706244967,
      "node_id": "LA_kwDOQb6kR88AAAACQomLZw",
      "url": "https://api.github.com/repos/openclaw/openclaw/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 2,
  "created_at": "2026-02-06T16:40:18Z",
  "updated_at": "2026-02-07T02:11:23Z",
  "closed_at": "2026-02-07T02:11:23Z",
  "author_association": "NONE",
  "type": null,
  "active_lock_reason": null,
  "sub_issues_summary": {
    "total": 0,
    "completed": 0,
    "percent_completed": 0
  },
  "issue_dependencies_summary": {
    "blocked_by": 0,
    "total_blocked_by": 0,
    "blocking": 0,
    "total_blocking": 0
  },
  "body": "\n**Summary**\nCron jobs scheduled to run in the **main session** (`sessionTarget: \"main\"`, `payload.kind: \"systemEvent\"`) are being marked **skipped** with error:\n\n`timeout waiting for main lane to become idle`\n\nThis makes cron unusable for reliable automation (e.g., “check every 5 minutes”) in an active deployment.\n\n**Environment**\n- OpenClaw: `2026.2.3-1` (stable)\n- Host: Ubuntu 24.04.3 LTS on **WSL2**\n- Node: `24.13.0`\n- Gateway mode: local / bind loopback (`ws://127.0.0.1:18789`)\n- Cron enabled: `cron.enabled = true`\n\n**What I expected**\nA scheduled cron job targeting the main session should:\n- enqueue the system event and run on the main lane as soon as possible, even if the lane is busy (queue), or\n- at least not silently “skip” recurring jobs due to the lane being active.\n\nIn other words, a recurring “every 5 minutes” job should not become unreliable just because the main session is busy.\n\n**What happened**\nThe job runs were recorded as `status: \"skipped\"` with the error `timeout waiting for main lane to become idle`.\n\n**Reproduction steps**\n1. Enable cron:\n   - `cron.enabled: true` in `~/.openclaw/openclaw.json`\n2. Create a main-session cron job (every 5 minutes) with wakeMode now:\n\n```json\n{\n  \"name\": \"cdc:check-practical-slots-5min\",\n  \"schedule\": { \"kind\": \"cron\", \"expr\": \"*/5 * * * *\", \"tz\": \"Asia/Singapore\" },\n  \"sessionTarget\": \"main\",\n  \"wakeMode\": \"now\",\n  \"payload\": {\n    \"kind\": \"systemEvent\",\n    \"text\": \"CDC auto-check (every 5 min): …\"\n  }\n}\n```\n\n3. Keep the main session active/busy (normal use: chatting, browser relay automation, tool calls).\n4. Observe cron run history showing skipped runs.\n\n**Evidence**\nCron run JSONL file:\n- `~/.openclaw/cron/runs/bb43ab8c-df55-44bc-ac83-b6ad482a5ff1.jsonl`\n\nExample entry:\n\n```json\n{\"ts\":1770394267036,\"jobId\":\"bb43ab8c-df55-44bc-ac83-b6ad482a5ff1\",\"action\":\"finished\",\"status\":\"skipped\",\"error\":\"timeout waiting for main lane to become idle\",\"summary\":\"Reminder: check CDC Booking Portal Practical Lesson (Class 3 Motorcar) now. Book/reserve only slots whose start time is between 08:00–18:00 SGT. Target total bookings: 10 slots max, 1 per day. If a verification code/captcha is required, ask the user to enter it in the portal. Ask before any irreversible payment/confirmation step.\",\"runAtMs\":1770394146856,\"durationMs\":120177,\"nextRunAtMs\":1770394320000}\n```\n\nAlso confirmed:\n- `openclaw cron run <jobId> --force` can execute jobs and write run history, so the cron engine itself works; the problem is scheduler execution for main-session jobs under load.\n\n**Impact**\nAny “polling” automation that must run in main session (e.g., controlling a Chrome Relay tab) becomes unreliable and effectively non-automatable.\n\n**Suggested fix / questions**\n- Should main-session cron jobs **queue** instead of skip when the main lane is busy?\n- If skipping is intended, can we configure a much longer wait/backoff, or a guaranteed eventual enqueue?\n- Can the cron job be re-tried rather than marked skipped?\n\n---\n",
  "closed_by": {
    "login": "tyler6204",
    "id": 64381258,
    "node_id": "MDQ6VXNlcjY0MzgxMjU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/64381258?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tyler6204",
    "html_url": "https://github.com/tyler6204",
    "followers_url": "https://api.github.com/users/tyler6204/followers",
    "following_url": "https://api.github.com/users/tyler6204/following{/other_user}",
    "gists_url": "https://api.github.com/users/tyler6204/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tyler6204/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tyler6204/subscriptions",
    "organizations_url": "https://api.github.com/users/tyler6204/orgs",
    "repos_url": "https://api.github.com/users/tyler6204/repos",
    "events_url": "https://api.github.com/users/tyler6204/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tyler6204/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/openclaw/openclaw/issues/10538/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/openclaw/openclaw/issues/10538/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed",
  "pinned_comment": null
}
