{
  "url": "https://api.github.com/repos/openclaw/openclaw/issues/8298",
  "repository_url": "https://api.github.com/repos/openclaw/openclaw",
  "labels_url": "https://api.github.com/repos/openclaw/openclaw/issues/8298/labels{/name}",
  "comments_url": "https://api.github.com/repos/openclaw/openclaw/issues/8298/comments",
  "events_url": "https://api.github.com/repos/openclaw/openclaw/issues/8298/events",
  "html_url": "https://github.com/openclaw/openclaw/issues/8298",
  "id": 3893296739,
  "node_id": "I_kwDOQb6kR87oDv5j",
  "number": 8298,
  "title": "[Bug]: Cron Reminders Skipping/Silent Failure + Temporary Fix",
  "user": {
    "login": "anton200052",
    "id": 65965572,
    "node_id": "MDQ6VXNlcjY1OTY1NTcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/65965572?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anton200052",
    "html_url": "https://github.com/anton200052",
    "followers_url": "https://api.github.com/users/anton200052/followers",
    "following_url": "https://api.github.com/users/anton200052/following{/other_user}",
    "gists_url": "https://api.github.com/users/anton200052/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anton200052/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anton200052/subscriptions",
    "organizations_url": "https://api.github.com/users/anton200052/orgs",
    "repos_url": "https://api.github.com/users/anton200052/repos",
    "events_url": "https://api.github.com/users/anton200052/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anton200052/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 9706244967,
      "node_id": "LA_kwDOQb6kR88AAAACQomLZw",
      "url": "https://api.github.com/repos/openclaw/openclaw/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2026-02-03T21:21:11Z",
  "updated_at": "2026-02-08T03:50:09Z",
  "closed_at": "2026-02-08T03:50:09Z",
  "author_association": "NONE",
  "type": null,
  "active_lock_reason": null,
  "sub_issues_summary": {
    "total": 0,
    "completed": 0,
    "percent_completed": 0
  },
  "issue_dependencies_summary": {
    "blocked_by": 0,
    "total_blocked_by": 0,
    "blocking": 0,
    "total_blocking": 0
  },
  "body": "## Summary\n\nI noticed many users complaining about cron jobs getting stuck in `skipped` status, timing out, or failing to deliver notifications.\n\n**My finding:** The root cause isn't necessarily a bug in OpenClaw's cron system itself. The problem is that the **AI Agent almost always generates a terrible JSON configuration by default**. It picks settings which cause the job to hang, loop, or fail silently.\n\nI am not entirely sure how the system logic works internally, but I assume that the default parameters (like `sessionTarget: \"main\"` and `wakeMode: \"next-heartbeat\"`) should work in theory. However, for some reason, they cause these failures. I have found what I consider a \"temporary\" fix/workaround that ensures reliable delivery.\n\n**Note:** I tested this strictly for **Telegram bot reminders only**. I have not tested it with other channels (Discord, WhatsApp, etc.), so I am unsure if the behavior persists there.\n\n## Steps to reproduce\n\n### Case 1: Silent Failure (Default Agent Behavior)\n\n**Problem:** Default agent generation. The reminder does not work. Web UI status shows **OK**, but the notification is never delivered to the user.\n\n**CLI Command:**\n\n```bash\nopenclaw cron add \\\n  --name \"Test 1: Bad Reminder\" \\\n  --at \"2m\" \\\n  --session main \\\n  --wake next-heartbeat \\\n  --system-event \"ðŸ”” This is a test reminder (bad payload). It should not have arrived by itself!\"\n```\n\n**Agent JSON:**\n\n```json\n{\n  \"id\": \"49533410-f0a4-479c-8526-a21e4593b583\",\n  \"agentId\": \"main\",\n  \"name\": \"Test 1: Bad Reminder (Default)\",\n  \"enabled\": true,\n  \"createdAtMs\": 1770147341964,\n  \"updatedAtMs\": 1770147341964,\n  \"schedule\": {\n    \"atMs\": 1770147458927,\n    \"kind\": \"at\"\n  },\n  \"sessionTarget\": \"main\",\n  \"wakeMode\": \"next-heartbeat\",\n  \"payload\": {\n    \"kind\": \"systemEvent\",\n    \"text\": \"ðŸ”” This is a test reminder (bad payload). It should not have arrived by itself!\"\n  },\n  \"state\": {\n    \"nextRunAtMs\": 1770147458927\n  }\n}\n```\n\n---\n\n### Case 2: Skipped/Looping Error\n\n**Problem:** The agent's attempt to \"fix\" the previous error by changing wake mode, which results in execution spam in the UI. Web UI status: **skipped**.\n\n**CLI Command:**\n\n```bash\nopenclaw cron add \\\n  --name \"Test 2: Bad Reminder\" \\\n  --at \"2m\" \\\n  --session main \\\n  --wake now \\\n  --system-event \"ðŸ”” This is a test reminder (bad payload). It should not have arrived by itself!\"\n```\n\n**Agent JSON:**\n\n```json\n{\n  \"id\": \"49533410-f0a4-479c-8526-a21e4593b583\",\n  \"agentId\": \"main\",\n  \"name\": \"Test 2: Bad Reminder (Wake Now)\",\n  \"enabled\": true,\n  \"createdAtMs\": 1770147341964,\n  \"updatedAtMs\": 1770147341964,\n  \"schedule\": {\n    \"atMs\": 1770147458927,\n    \"kind\": \"at\"\n  },\n  \"sessionTarget\": \"main\",\n  \"wakeMode\": \"now\",\n  \"payload\": {\n    \"kind\": \"systemEvent\",\n    \"text\": \"ðŸ”” This is a test reminder (bad payload). It should not have arrived by itself!\"\n  },\n  \"state\": {\n    \"nextRunAtMs\": 1770147458927\n  }\n}\n```\n\n---\n\n### Case 3: Successful Delivery (The Fix)\n\n**Result:** Outcome after applying the proposed system prompt \"fix\". The job is automatically deleted from the list, and the reminder is successfully delivered.\n\n**CLI Command:**\n\n```bash\nopenclaw cron add \\\n  --name \"Test 3: Strict Reminder\" \\\n  --at \"2m\" \\\n  --session isolated \\\n  --wake now \\\n  --delete-after-run \\\n  --deliver \\\n  --message \"ðŸ”” This reminder was created with new rules (last-route + auto-delete). It works!\"\n```\n\n**Agent JSON:**\n\n```json\n{\n  \"id\": \"63b433b8-8c2f-4667-8b1c-83cce2d08ab6\",\n  \"agentId\": \"main\",\n  \"name\": \"Test 3: Strict Reminder (Success)\",\n  \"enabled\": true,\n  \"createdAtMs\": 1770146385856,\n  \"updatedAtMs\": 1770146385856,\n  \"schedule\": {\n    \"kind\": \"at\",\n    \"atMs\": 1770146502995\n  },\n  \"sessionTarget\": \"isolated\",\n  \"wakeMode\": \"now\",\n  \"payload\": {\n    \"kind\": \"agentTurn\",\n    \"deliver\": true,\n    \"message\": \"ðŸ”” This reminder was created with new rules (last-route + auto-delete). It works!\"\n  },\n  \"state\": {\n    \"nextRunAtMs\": 1770146502995\n  }\n}\n```\n\n## Expected behavior\n\nThe cron job should trigger at the scheduled time, deliver a notification to the active channel (e.g., Telegram), and be removed from the active jobs list (if `deleteAfterRun` is set).\n\n## Actual behavior\n\n* **In Case 1:** The logs show `embedded run done`, but no message is delivered to the user. The job is not deleted from the list.\n* **In Case 2:** The job status changes to `skipped` in the Web UI and retries execution repeatedly (~20 times), jamming the queue.\n\n## Environment\n\n* **OpenClaw version:** OpenClaw 2026.2.1\n* **OS:** Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-168-generic x86_64)\n* **Install method:** VPS SERVER (npm)\n\n## Logs or screenshots\n\n### Case 1: Silent Failure Logs\n\n<img width=\"1613\" height=\"572\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/49bc2298-213d-4612-aa63-85e4fed51afb\" />\n\n```text\ndebug diagnostic lane enqueue: lane=session:agent:main:main queueSize=1...\ndebug agent/embedded embedded run done: durationMs=5110 aborted=false\n// Status: Success in logs, but zero delivery to user.\n```\n\n### Case 2: Skipped/Looping Logs\n\n<img width=\"1649\" height=\"801\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e2897e7f-4fcb-44fc-9c31-51c7dc86ea7e\" />\n\n```text\ndebug diagnostic lane enqueue: lane=session:agent:main:main queueSize=1...\ndebug agent/embedded embedded run done: durationMs=10396 aborted=false\n// Status: Job loops or skips, jamming the queue in UI.\n```\n\n### Case 3: Successful Delivery (The Fix)\n\n```text\ndebug agent/embedded embedded run start: messageChannel=telegram...\ndebug agent/embedded embedded run done: durationMs=1999 aborted=false\n// Status: Delivered successfully via Telegram channel.\n```\n\n---\n\n## ðŸ”§ Proposed Fix: System Prompt Calibration\n\nTo ensure the Agent generates working cron jobs, add the following rules to the **System Prompt/Memory**:\n\n```text\nWhen creating a reminder (cron job), use STRICTLY the following format.\nYour goal is to rely on OpenClaw's native auto-routing (last-route) and guarantee delivery.\n\nCron Job Rules:\n1. wakeMode: ALWAYS \"now\" (fire instantly).\n2. deleteAfterRun: ALWAYS true (cleanup after execution).\n3. sessionTarget: \"isolated\".\n\nJSON Payload Rules:\n1. kind: ALWAYS \"agentTurn\".\n2. deliver: ALWAYS true (triggers system auto-routing).\n3. message: Just the final reminder text.\n   IMPORTANT: Do NOT write instructions for yourself inside the message. Just the text.\n4. FORBIDDEN: Do NOT specify `channel` or `to`. Do NOT use the `message` tool inside the job.\n```",
  "closed_by": {
    "login": "tyler6204",
    "id": 64381258,
    "node_id": "MDQ6VXNlcjY0MzgxMjU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/64381258?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tyler6204",
    "html_url": "https://github.com/tyler6204",
    "followers_url": "https://api.github.com/users/tyler6204/followers",
    "following_url": "https://api.github.com/users/tyler6204/following{/other_user}",
    "gists_url": "https://api.github.com/users/tyler6204/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tyler6204/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tyler6204/subscriptions",
    "organizations_url": "https://api.github.com/users/tyler6204/orgs",
    "repos_url": "https://api.github.com/users/tyler6204/repos",
    "events_url": "https://api.github.com/users/tyler6204/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tyler6204/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/openclaw/openclaw/issues/8298/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/openclaw/openclaw/issues/8298/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed",
  "pinned_comment": null
}
