{
  "url": "https://api.github.com/repos/openclaw/openclaw/issues/1234",
  "repository_url": "https://api.github.com/repos/openclaw/openclaw",
  "labels_url": "https://api.github.com/repos/openclaw/openclaw/issues/1234/labels{/name}",
  "comments_url": "https://api.github.com/repos/openclaw/openclaw/issues/1234/comments",
  "events_url": "https://api.github.com/repos/openclaw/openclaw/issues/1234/events",
  "html_url": "https://github.com/openclaw/openclaw/pull/1234",
  "id": 3829310874,
  "node_id": "PR_kwDOQb6kR869_Jki",
  "number": 1234,
  "title": "Gateway: fix ws checkServerIdentity typing",
  "user": {
    "login": "chrisrodz",
    "id": 2967620,
    "node_id": "MDQ6VXNlcjI5Njc2MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967620?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chrisrodz",
    "html_url": "https://github.com/chrisrodz",
    "followers_url": "https://api.github.com/users/chrisrodz/followers",
    "following_url": "https://api.github.com/users/chrisrodz/following{/other_user}",
    "gists_url": "https://api.github.com/users/chrisrodz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chrisrodz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chrisrodz/subscriptions",
    "organizations_url": "https://api.github.com/users/chrisrodz/orgs",
    "repos_url": "https://api.github.com/users/chrisrodz/repos",
    "events_url": "https://api.github.com/users/chrisrodz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chrisrodz/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2026-01-19T11:37:24Z",
  "updated_at": "2026-01-19T12:19:00Z",
  "closed_at": "2026-01-19T12:00:51Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/openclaw/openclaw/pulls/1234",
    "html_url": "https://github.com/openclaw/openclaw/pull/1234",
    "diff_url": "https://github.com/openclaw/openclaw/pull/1234.diff",
    "patch_url": "https://github.com/openclaw/openclaw/pull/1234.patch",
    "merged_at": null
  },
  "body": "## Summary\n- Fixes a TS2322 build error in `src/gateway/client.ts` by aligning `checkServerIdentity` with the `@types/ws` boolean signature.\n- Keeps the TLS fingerprint validation behavior but now throws on mismatch and returns `true` on success.\n\n## Issue\n`wsOptions.checkServerIdentity` is typed by `@types/ws` as `(servername: string, cert: CertMeta) => boolean`, but our earlier implementation returned `Error | undefined`, triggering `TS2322` during `pnpm build`.\n\n## Fix\n- Update `checkServerIdentity` to throw `Error` on missing/mismatched fingerprint and return `true` when validation succeeds, matching the expected boolean signature.\n\n## Testing\n- `pnpm build` (user verified; build succeeds).\n\n## Prompts\n- \"help me debug this build error I'm getting on pnpm build: âžœ  clawdbot git:(main) pnpm build ... error TS2322 ...\"\n- \"pnpm build works as expected. should we open a PR to the upstream project with this fix?\"\n- \"I meant to the clawdbot repository\"\n- \"Yes, commit, push and open a PR. Make sure to include the prompts we used, your explanation of the issue and our testing (pnpm build works) as well as anything else useful for the maintainer of the project to review\"\n- \"seems like the fix you implemented is just masking the problem. let's apply the diff I pasted instead\"\n- \"try again I switched back to the branch, here's the fresh diff for you\"\n- \"update the PR and it's description to reflect this change\"\n",
  "closed_by": {
    "login": "chrisrodz",
    "id": 2967620,
    "node_id": "MDQ6VXNlcjI5Njc2MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967620?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chrisrodz",
    "html_url": "https://github.com/chrisrodz",
    "followers_url": "https://api.github.com/users/chrisrodz/followers",
    "following_url": "https://api.github.com/users/chrisrodz/following{/other_user}",
    "gists_url": "https://api.github.com/users/chrisrodz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chrisrodz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chrisrodz/subscriptions",
    "organizations_url": "https://api.github.com/users/chrisrodz/orgs",
    "repos_url": "https://api.github.com/users/chrisrodz/repos",
    "events_url": "https://api.github.com/users/chrisrodz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chrisrodz/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/openclaw/openclaw/issues/1234/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/openclaw/openclaw/issues/1234/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
