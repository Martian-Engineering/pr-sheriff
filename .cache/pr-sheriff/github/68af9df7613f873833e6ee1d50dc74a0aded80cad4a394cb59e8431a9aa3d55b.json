{
  "url": "https://api.github.com/repos/openclaw/openclaw/issues/9483",
  "repository_url": "https://api.github.com/repos/openclaw/openclaw",
  "labels_url": "https://api.github.com/repos/openclaw/openclaw/issues/9483/labels{/name}",
  "comments_url": "https://api.github.com/repos/openclaw/openclaw/issues/9483/comments",
  "events_url": "https://api.github.com/repos/openclaw/openclaw/issues/9483/events",
  "html_url": "https://github.com/openclaw/openclaw/issues/9483",
  "id": 3900268410,
  "node_id": "I_kwDOQb6kR87oeV96",
  "number": 9483,
  "title": "Cron jobs created at runtime not scheduled (missing enabled default)",
  "user": {
    "login": "mactsk",
    "id": 5073360,
    "node_id": "MDQ6VXNlcjUwNzMzNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5073360?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mactsk",
    "html_url": "https://github.com/mactsk",
    "followers_url": "https://api.github.com/users/mactsk/followers",
    "following_url": "https://api.github.com/users/mactsk/following{/other_user}",
    "gists_url": "https://api.github.com/users/mactsk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mactsk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mactsk/subscriptions",
    "organizations_url": "https://api.github.com/users/mactsk/orgs",
    "repos_url": "https://api.github.com/users/mactsk/repos",
    "events_url": "https://api.github.com/users/mactsk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mactsk/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2026-02-05T08:13:50Z",
  "updated_at": "2026-02-08T03:52:18Z",
  "closed_at": "2026-02-08T03:52:18Z",
  "author_association": "NONE",
  "type": null,
  "active_lock_reason": null,
  "sub_issues_summary": {
    "total": 0,
    "completed": 0,
    "percent_completed": 0
  },
  "issue_dependencies_summary": {
    "blocked_by": 0,
    "total_blocked_by": 0,
    "blocking": 0,
    "total_blocking": 0
  },
  "body": " ## Bug Description\n\n  Cron jobs created at runtime via `cron.add` are never scheduled because the `enabled` field defaults to `undefined` instead of `true`.\n\n  ## Version\n\n  `2026.2.2-3`\n\n  ## Steps to Reproduce\n\n  1. Create a cron job via the agent tool or RPC:\n  ```javascript\n  cron.add({\n    name: \"Test job\",\n    schedule: { kind: \"at\", atMs: Date.now() + 120000 },\n    sessionTarget: \"isolated\",\n    payload: { kind: \"agentTurn\", message: \"Test\" }\n  })\n\n  2. Check cron.status() - nextWakeAtMs does not update to include the new job\n  3. The job is never executed\n\n  Root Cause\n\n  In normalizeCronJobInput(), the applyDefaults section sets defaults for wakeMode and sessionTarget, but not for enabled.\n\n  Jobs without explicit enabled: true never get a nextRunAtMs computed because computeJobNextRunAtMs() returns early if !job.enabled.\n\n  Suggested Fix\n\n  if (options.applyDefaults) {\n    if (next.enabled === undefined) next.enabled = true;  // Add this\n    if (!next.wakeMode) next.wakeMode = \"next-heartbeat\";\n    // ...\n  }\n\n  Workaround\n\n  Explicitly pass enabled: true when creating jobs.\n\n  ---ðŸ¤– AI-assisted report - fully tested and verified",
  "closed_by": {
    "login": "tyler6204",
    "id": 64381258,
    "node_id": "MDQ6VXNlcjY0MzgxMjU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/64381258?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tyler6204",
    "html_url": "https://github.com/tyler6204",
    "followers_url": "https://api.github.com/users/tyler6204/followers",
    "following_url": "https://api.github.com/users/tyler6204/following{/other_user}",
    "gists_url": "https://api.github.com/users/tyler6204/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tyler6204/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tyler6204/subscriptions",
    "organizations_url": "https://api.github.com/users/tyler6204/orgs",
    "repos_url": "https://api.github.com/users/tyler6204/repos",
    "events_url": "https://api.github.com/users/tyler6204/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tyler6204/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/openclaw/openclaw/issues/9483/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/openclaw/openclaw/issues/9483/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed",
  "pinned_comment": null
}
